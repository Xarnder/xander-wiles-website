<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Favicon Generator</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Default favicon for the tool itself -->
    <!-- Theme-aware SVG icons (modern browsers) -->
    <link rel="icon" href="favicon.ico" sizes="any"> <!-- Fallback for older browsers -->
    <link rel="icon" href="favicon-light.svg" type="image/svg+xml" media="(prefers-color-scheme: light)">
    <link rel="icon" href="favicon-dark.svg" type="image/svg+xml" media="(prefers-color-scheme: dark)">

    <!-- Fallback PNG icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">

    <!-- Other essential links -->
    <link rel="manifest" href="site.webmanifest">
    <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#111115" media="(prefers-color-scheme: dark)">
    <!-- <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%238b5cf6;'/%3E%3Cstop offset='100%25' style='stop-color:%2306b6d4;'/%3E%3C/linearGradient%3E%3C/defs%3E%3Ccircle cx='50' cy='50' r='50' fill='url(%23g)'/%3E%3C/svg%3E"> -->
</head>

<body>
    <div id="main-nav-placeholder"></div>


    <div class="background-overlay"></div>
    <div class="floating-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
    </div>

    <header class="site-header">
        <div class="header-content">
            <a href="#" class="logo">FaviconGen</a>
        </div>
    </header>

    <main class="app-container">
        <!-- Step 1: Upload Card -->
        <section class="glass-card" id="upload-card">
            <h2>1. Upload Source Image</h2>
            <p class="description">Upload a high-res <strong>PNG</strong> (to trace) or an existing <strong>SVG</strong>
                (to recolor). Square aspect ratio works best.</p>
            <div class="upload-area">
                <!-- Added accept="image/svg+xml" -->
                <input type="file" id="image-upload" accept="image/png, image/svg+xml" class="hidden">
                <label for="image-upload" id="upload-label">
                    <div id="upload-prompt">
                        <strong>Click to browse</strong> or drag & drop<br>
                        <small>(PNG or SVG)</small>
                    </div>
                    <div id="image-preview-container" class="hidden">
                        <img id="image-preview" src="#" alt="Image preview">
                        <span id="image-filename"></span>
                    </div>
                </label>
            </div>
            <div class="upload-actions">
                <button id="reset-btn" type="button" class="reset-btn hidden" title="Remove Image">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        viewBox="0 0 16 16">
                        <path
                            d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z" />
                    </svg>
                    Remove / Reset
                </button>
            </div>
            <div id="upload-error" class="status-message error hidden"></div>
        </section>

        <!-- Step 2: SVG Customization -->
        <section class="glass-card hidden" id="svg-controls-card">
            <h2>2. Customize Themes</h2>
            <p class="description">We generated a Dark Mode version. Use the swap button to switch them if needed.</p>

            <div class="svg-editor-layout">
                <div class="preview-header">
                    <h3>SVG Previews</h3>
                    <div class="preview-bg-controls" id="bg-controls">
                        <span>Preview BG:</span>
                        <div class="color-swatch active" data-color="transparent" title="Transparent"></div>
                        <div class="color-swatch" data-color="#ffffff" title="White" style="background-color: #ffffff;">
                        </div>
                        <div class="color-swatch" data-color="#71717a" title="Gray" style="background-color: #71717a;">
                        </div>
                        <div class="color-swatch" data-color="#111115" title="Dark" style="background-color: #111115;">
                        </div>
                    </div>
                </div>

                <!-- Preview Grid with Swap Button -->
                <div class="preview-grid">
                    <div class="preview-box">
                        <h4 class="theme-label"><span class="icon">‚òÄÔ∏è</span> Light Mode</h4>
                        <div id="svg-preview-wrapper-light" class="svg-preview-wrapper"></div>
                    </div>

                    <div class="swap-container">
                        <button id="swap-themes-btn" title="Swap Light and Dark SVGs">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                                viewBox="0 0 16 16">
                                <path fill-rule="evenodd"
                                    d="M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5zm14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5z" />
                            </svg>
                        </button>
                    </div>

                    <div class="preview-box">
                        <h4 class="theme-label"><span class="icon">üåô</span> Dark Mode</h4>
                        <div id="svg-preview-wrapper-dark" class="svg-preview-wrapper"></div>
                    </div>
                </div>

                <!-- Controls: Only visible for PNGs -->
                <div id="raster-controls" class="controls-grid">
                    <div class="divider"><span>Tracing Settings (PNG Only)</span></div>
                    <div class="control-group">
                        <label for="colors-slider">Colors</label>
                        <input type="range" id="colors-slider" min="2" max="20" value="8" step="1">
                        <span id="colors-value">8</span>
                    </div>
                    <div class="control-group">
                        <label for="detail-slider">Detail Level</label>
                        <input type="range" id="detail-slider" min="0" max="5" value="1" step="0.1">
                        <span id="detail-value">1.0</span>
                    </div>
                    <div class="control-group">
                        <label for="smoothing-slider">Smoothing</label>
                        <input type="range" id="smoothing-slider" min="0" max="5" value="1" step="1">
                        <span id="smoothing-value">1</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Step 3: Generate Card -->
        <section class="glass-card" id="generate-card">
            <h2>3. Generate Files</h2>
            <p class="description">Create the ZIP containing PNG fallbacks and your theme-aware SVGs.</p>
            <div class="controls">
                <!-- Padding Controls -->
                <!-- Padding Controls Refined -->
                <div class="controls-grid" style="margin-bottom: 2rem;">

                    <!-- Padding Slider -->
                    <div class="control-group">
                        <label for="padding-slider">Icon Padding</label>
                        <input type="range" id="padding-slider" min="0" max="50" value="0" step="5">
                        <span id="padding-value">0%</span>
                    </div>

                    <!-- Small Icons Toggle -->
                    <div class="control-group" style="justify-content: space-between;">
                        <label for="padding-small-icons" style="flex: 1;">Apply padding to small icons</label>
                        <div class="toggle-switch-wrapper">
                            <input type="checkbox" id="padding-small-icons" class="toggle-input">
                            <label for="padding-small-icons" class="toggle-label"></label>
                        </div>
                    </div>

                    <!-- Background Color Controls -->
                    <div class="divider"><span>Background Options</span></div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; align-items: start;">
                        <!-- Transparent Toggle -->
                        <div class="control-group"
                            style="grid-template-columns: 1fr 40px; gap: 0.5rem; margin-bottom: 0;">
                            <label for="bg-transparent-toggle" style="font-size: 0.9rem;">Transparent</label>
                            <div class="toggle-switch-wrapper"
                                style="transform: scale(0.8); transform-origin: right center;">
                                <input type="checkbox" id="bg-transparent-toggle" class="toggle-input">
                                <label for="bg-transparent-toggle" class="toggle-label"></label>
                            </div>
                        </div>

                        <!-- Apply All Toggle -->
                        <div class="control-group" id="bg-all-group"
                            style="grid-template-columns: 1fr 40px; gap: 0.5rem; margin-bottom: 0; opacity: 1; pointer-events: auto;">
                            <label for="bg-apply-all" style="font-size: 0.9rem;">Apply to all</label>
                            <div class="toggle-switch-wrapper"
                                style="transform: scale(0.8); transform-origin: right center;">
                                <input type="checkbox" id="bg-apply-all" class="toggle-input">
                                <label for="bg-apply-all" class="toggle-label"></label>
                            </div>
                        </div>

                        <!-- Color Picker (Full Width below) -->
                        <div class="control-group" id="bg-color-group"
                            style="grid-column: 1 / -1; grid-template-columns: auto 1fr; gap: 1rem; opacity: 1; pointer-events: auto; justify-content: start;">
                            <label for="bg-color-picker" style="font-size: 0.9rem;">Color:</label>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <input type="color" id="bg-color-picker" value="#ffffff">
                                <span id="bg-color-code"
                                    style="font-size: 0.9rem; color: var(--text-muted);">#ffffff</span>
                            </div>
                        </div>
                    </div>

                    <!-- Beta Overlay Controls -->
                    <div class="divider"><span>Beta Overlay Options</span></div>

                    <!-- Overlay Type -->
                    <div class="control-group">
                        <label for="overlay-type">Overlay</label>
                        <select id="overlay-type"
                            style="padding: 0.5rem; border-radius: 6px; border: 1px solid var(--glass-border); background: var(--bg-secondary); color: var(--text-primary);">
                            <option value="none" selected>None</option>
                            <option value="colour">Beta Colour</option>
                            <option value="grayscale">Beta Grayscale</option>
                        </select>
                        <!-- <span>Type</span> removed for layout -->
                    </div>

                    <div id="overlay-controls" class="hidden">
                        <!-- Size Slider -->
                        <div class="control-group">
                            <label for="overlay-size-slider">Size</label>
                            <input type="range" id="overlay-size-slider" min="10" max="100" value="40" step="5">
                            <span id="overlay-size-value">40%</span>
                        </div>

                        <!-- Position X Slider -->
                        <div class="control-group">
                            <label for="overlay-x-slider">Position X</label>
                            <input type="range" id="overlay-x-slider" min="0" max="100" value="100" step="5">
                            <span id="overlay-x-value">100%</span>
                        </div>

                        <!-- Position Y Slider -->
                        <div class="control-group">
                            <label for="overlay-y-slider">Position Y</label>
                            <input type="range" id="overlay-y-slider" min="0" max="100" value="0" step="5">
                            <span id="overlay-y-value">0%</span>
                        </div>
                    </div>
                </div>

                <!-- Preview Area (Compact) -->
                <div class="padding-preview-compact"
                    style="margin-bottom: 2rem; display: flex; justify-content: center; align-items: center; gap: 1rem;">
                    <div class="padding-preview-box">
                        <div id="padding-preview-icon" class="preview-icon"></div>
                    </div>
                    <span class="preview-label">Padding Preview</span>
                </div>

                <button id="generate-btn" disabled>Generate All Files</button>
            </div>
        </section>

        <!-- Step 4: Results Card -->
        <section class="glass-card hidden" id="results-card">
            <h2>4. Download & Install</h2>
            <p class="description">Download the .zip and paste the code below into your HTML &lt;head&gt;.</p>
            <div id="results-content" class="results-content"></div>
            <div id="generate-status" class="status-message hidden"></div>
        </section>
    </main>

    <!-- External Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
    <script
        src="https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.3.0/color-thief.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/imagetracerjs@1.2.6/imagetracer_v1.2.6.js"></script>

    <script src="script.js"></script>
    <script src="/assets/js/nav-loader.js"></script>

</body>

</html>