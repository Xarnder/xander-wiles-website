<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Shout it Out!</title>

    <!-- Theme-aware SVG icons (modern browsers) -->
    <link rel="icon" href="favicon.ico" sizes="any"> <!-- Fallback for older browsers -->
    <link rel="icon" href="favicon-light.svg" type="image/svg+xml" media="(prefers-color-scheme: light)">
    <link rel="icon" href="favicon-dark.svg" type="image/svg+xml" media="(prefers-color-scheme: dark)">

    <!-- Fallback PNG icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">

    <!-- Other essential links -->
    <link rel="manifest" href="site.webmanifest">
    <meta name="color-scheme" content="dark">
    <meta name="theme-color" content="#0f0c29">

    <!-- Google Fonts for Modern Typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;800&display=swap" rel="stylesheet">

    <!-- Global Website Header Stylesheet -->
    <link rel="stylesheet" href="/assets/css/style.css">

    <!-- Game Specific Stylesheet -->
    <link rel="stylesheet" href="app.css">
</head>

<body>
    <!-- Global Navigation Placeholder -->
    <div id="main-nav-placeholder"></div>
    <script src="/assets/js/nav-loader.js"></script>

    <!-- Background Orbs -->
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>

    <!-- Main App Container -->
    <main class="app-container">

        <!-- Screen 1: Setup -->
        <div id="setup-screen" class="glass-card">
            <h1>Shout it Out!</h1>
            <button id="start-btn" class="neon-btn start-top-btn">Start Game</button>
            <p>Paste your list of words below (one per line):</p>
            <textarea id="word-list" placeholder="Apple&#10;Banana&#10;Eiffel Tower&#10;Spider-Man"></textarea>
            <div id="word-counter"
                style="text-align: right; margin-top: -15px; margin-bottom: 20px; opacity: 0.8; font-size: 0.95rem;">0
                words</div>
            <div class="setup-actions">
                <button id="instructions-btn" class="neon-btn secondary">How to Play</button>
                <button id="categories-btn" class="neon-btn secondary">Categories</button>
                <button id="settings-btn" class="neon-btn secondary">Settings</button>
            </div>

            <!-- Last Game Stats Container -->
            <div id="last-game-stats-container" class="hidden"
                style="margin-top: 30px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1);">
                <h3 style="margin-bottom: 10px; opacity: 0.8; font-size: 1.1rem;">Last Game Stats</h3>
                <div id="last-game-full-stats" style="margin-bottom: 20px;">
                    <p id="last-game-score"
                        style="font-size: 1.5rem; font-weight: bold; color: #00d2ff; margin-bottom: 5px;">Score: 0</p>
                    <div id="last-game-detailed-stats"
                        style="font-size: 0.9rem; opacity: 0.8; display: flex; flex-direction: column; gap: 5px;"></div>
                </div>
                <button id="main-menu-review-btn" class="neon-btn secondary" style="width: 100%;">Review Last Game
                    Words</button>
            </div>
        </div>

        <!-- Categories Modal -->
        <div id="categories-modal" class="glass-card hidden" style="max-width: 800px;">
            <h2 style="margin-bottom: 5px;">Select Categories</h2>
            <p style="text-align: center; margin-bottom: 25px; opacity: 0.8; font-size: 0.95rem;">You can select
                multiple categories at once to add.</p>
            <div id="categories-grid" class="categories-grid"></div>
            <div class="category-actions" style="display: flex; flex-direction: column; gap: 15px; margin-top: 20px;">
                <button id="add-categories-btn" class="neon-btn">Add to List</button>
                <div style="display: flex; gap: 15px;">
                    <button id="remove-categories-btn" class="neon-btn secondary" style="flex: 1;">Remove from
                        List</button>
                    <button id="clear-list-btn" class="neon-btn secondary" style="flex: 1;">Clear Entire List</button>
                </div>
                <button id="close-categories-btn" class="neon-btn secondary"
                    style="border: none; box-shadow: none; opacity: 0.8;">Cancel</button>
            </div>
        </div>

        <!-- Settings Modal -->
        <div id="settings-screen" class="glass-card hidden">
            <h2>Settings</h2>

            <div class="setting-group">
                <label for="time-select">Game Time:</label>
                <select id="time-select" class="glass-input">
                    <option value="30">30 Seconds</option>
                    <option value="60" selected>1 Minute</option>
                    <option value="90">1 Minute 30 Seconds</option>
                    <option value="120">2 Minutes</option>
                    <option value="180">3 Minutes</option>
                    <option value="240">4 Minutes</option>
                    <option value="300">5 Minutes</option>
                    <option value="custom">Custom...</option>
                </select>
                <input type="number" id="custom-time-input" class="glass-input hidden" min="1" max="60"
                    placeholder="Minutes" style="margin-top: 10px;">
            </div>

            <div class="setting-group">
                <label for="sensitivity-select">Tilt Sensitivity:</label>
                <select id="sensitivity-select" class="glass-input">
                    <option value="30">High (30°)</option>
                    <option value="45" selected>Normal (45°)</option>
                    <option value="60">Low (60°)</option>
                </select>
            </div>

            <div class="setting-group checkbox-group">
                <input type="checkbox" id="tilt-toggle" checked>
                <label for="tilt-toggle">Enable Tilt Detection</label>
            </div>

            <div class="setting-group checkbox-group">
                <input type="checkbox" id="randomize-toggle" checked>
                <label for="randomize-toggle">Randomize Word Order</label>
            </div>

            <div class="setting-group checkbox-group">
                <input type="checkbox" id="sound-toggle" checked>
                <label for="sound-toggle">Enable Sound Effects</label>
            </div>

            <div class="setting-group checkbox-group">
                <input type="checkbox" id="show-buttons-toggle" checked>
                <label for="show-buttons-toggle">Show On-Screen Buttons (Skip/Correct)</label>
            </div>

            <div class="setting-group checkbox-group">
                <input type="checkbox" id="show-goback-toggle" checked>
                <label for="show-goback-toggle">Show 'Go Back' Button</label>
            </div>

            <div class="setting-group checkbox-group">
                <input type="checkbox" id="show-pastword-toggle" checked>
                <label for="show-pastword-toggle">Show Previous Word Indicator</label>
            </div>

            <button id="close-settings-btn" class="neon-btn">Save & Close</button>
        </div>

        <!-- Custom Alert Modal -->
        <div id="alert-modal" class="glass-card hidden">
            <h2 id="alert-title">Oops!</h2>
            <p id="alert-message">Please enter some words first!</p>
            <button id="alert-close-btn" class="neon-btn secondary">Got it</button>
        </div>

        <!-- Instructions Modal -->
        <div id="instructions-modal" class="glass-card hidden">
            <h2>How to Play</h2>
            <ul class="instructions-list">
                <li><strong>1.</strong> Enter a list of words or tap "Categories".</li>
                <li><strong>2.</strong> Hold your phone horizontally against your forehead.</li>
                <li><strong>3.</strong> Have your friends describe the word on screen.</li>
                <li><strong>4.</strong> Tilt your phone <strong>UP</strong> to mark it <strong>Correct</strong>.</li>
                <li><strong>5.</strong> Tilt your phone <strong>DOWN</strong> to <strong>Skip</strong>.</li>
                <li><strong>6.</strong> Guess as many as you can before time runs out!</li>
            </ul>
            <button id="close-instructions-btn" class="neon-btn secondary">Got it</button>
        </div>

        <!-- Review Words Modal -->
        <div id="review-modal" class="glass-card hidden">
            <h2>Word Review</h2>
            <div class="review-lists">
                <div class="review-column">
                    <h3 class="correct-text" style="color: #00e676; text-shadow: 0 0 10px rgba(0,230,118,0.5);">Correct
                    </h3>
                    <ul id="correct-words-list" class="word-list"></ul>
                </div>
                <div class="review-column">
                    <h3 class="skip-text" style="color: #ff4b4b; text-shadow: 0 0 10px rgba(255,75,75,0.5);">Skipped
                    </h3>
                    <ul id="skipped-words-list" class="word-list"></ul>
                </div>
            </div>
            <button id="close-review-btn" class="neon-btn secondary">Close</button>
        </div>

        <!-- Screen 2: Game Play -->
        <div id="play-screen" class="glass-card hidden">
            <!-- Fallback Buttons -->
            <button id="skip-btn" class="side-btn skip-btn">SKIP<br>▼</button>

            <div class="word-display-container">
                <button id="go-back-btn" class="go-back-btn hidden">↩ Go Back</button>
                <p id="timer">Time: 60s</p>
                <div class="word-animator">
                    <h3 id="past-word" class="past-word hidden"></h3>
                    <h2 id="current-word">Word</h2>
                </div>
                <p id="instruction-text">Tilt UP = Correct | Tilt DOWN = Skip</p>
            </div>

            <button id="correct-btn" class="side-btn correct-btn">CORRECT<br>▲</button>
        </div>

        <!-- Screen 3: Game Over -->
        <div id="end-screen" class="glass-card hidden">
            <h1>Game Over!</h1>
            <h2 id="final-score">Score: 0</h2>
            <p id="final-stats" class="stats-text">0 correct out of 0 (0%)</p>
            <ul id="results-list"></ul>
            <div class="setup-actions">
                <button id="review-words-btn" class="neon-btn secondary" style="font-size: 1rem;">Review Words</button>
                <button id="restart-remove-btn" class="neon-btn secondary" style="font-size: 1rem;">Play Again (Remove
                    Used)</button>
                <button id="restart-btn" class="neon-btn" style="font-size: 1rem;">Play Again (Keep All)</button>
            </div>
        </div>

    </main>

    <!-- Game Specific Script -->
    <script src="app.js"></script>
</body>

</html>