<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Favicon Generator</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%238b5cf6;'/%3E%3Cstop offset='100%25' style='stop-color:%2306b6d4;'/%3E%3C/linearGradient%3E%3C/defs%3E%3Ccircle cx='50' cy='50' r='50' fill='url(%23g)'/%3E%3C/svg%3E">

</head>
<body>

    <div class="background-overlay"></div>
    <div class="floating-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
    </div>

    <header class="site-header">
        <div class="header-content">
            <a href="#" class="logo">FaviconGen</a>
        </div>
    </header>

    <main class="app-container">
        <!-- Step 1: Upload Card -->
        <section class="glass-card" id="upload-card">
            <h2>1. Upload Your Source Image</h2>
            <p class="description">Drop a high-resolution PNG file into the box below. For best results, use a square image of at least 512x512 pixels.</p>
            <div class="upload-area">
                <input type="file" id="image-upload" accept="image/png" class="hidden">
                <label for="image-upload" id="upload-label">
                    <div id="upload-prompt">
                        <strong>Click to browse</strong> or drag & drop
                    </div>
                    <div id="image-preview-container" class="hidden">
                        <img id="image-preview" src="#" alt="Image preview">
                        <span id="image-filename"></span>
                    </div>
                </label>
            </div>
            <div id="upload-error" class="status-message error hidden"></div>
        </section>

        <!-- Step 2: SVG Customization -->
        <section class="glass-card hidden" id="svg-controls-card">
            <h2>2. Customize Your SVG Themes</h2>
            <p class="description">Adjust the sliders to refine the traced SVGs. A "Dark Mode" version is automatically generated by inverting colors while preserving skin tones.</p>
            
            <div class="svg-editor-layout">
                <div class="preview-header">
                    <h3>SVG Previews</h3>
                    <div class="preview-bg-controls" id="bg-controls">
                        <span>BG:</span>
                        <div class="color-swatch active" data-color="transparent" title="Transparent Background"></div>
                        <div class="color-swatch" data-color="#ffffff" title="White Background" style="background-color: #ffffff;"></div>
                        <div class="color-swatch" data-color="#71717a" title="Gray Background" style="background-color: #71717a;"></div>
                        <div class="color-swatch" data-color="#111115" title="Dark Background" style="background-color: #111115;"></div>
                    </div>
                </div>

                <div class="preview-grid">
                    <div class="preview-box">
                        <h4>Light Mode (Default)</h4>
                        <div id="svg-preview-wrapper-light" class="svg-preview-wrapper"></div>
                    </div>
                    <div class="preview-box">
                        <h4>Dark Mode (Smart Invert)</h4>
                        <div id="svg-preview-wrapper-dark" class="svg-preview-wrapper"></div>
                    </div>
                </div>

                <div class="controls-grid">
                    <div class="control-group">
                        <label for="colors-slider">Colors</label>
                        <input type="range" id="colors-slider" min="2" max="20" value="8" step="1">
                        <span id="colors-value">8</span>
                    </div>
                    <div class="control-group">
                        <label for="detail-slider">Detail Level</label>
                        <input type="range" id="detail-slider" min="0" max="5" value="1" step="0.1">
                        <span id="detail-value">1.0</span>
                    </div>
                    <div class="control-group">
                        <label for="smoothing-slider">Smoothing</label>
                        <input type="range" id="smoothing-slider" min="0" max="5" value="1" step="1">
                        <span id="smoothing-value">1</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Step 3: Generate Card -->
        <section class="glass-card" id="generate-card">
            <h2>3. Generate Your Files</h2>
            <p class="description">Click the button to generate the complete set of favicons (using your original PNG) and both themed SVGs.</p>
            <div class="controls">
                <button id="generate-btn" disabled>Generate All Files</button>
            </div>
        </section>

        <!-- Step 4: Results Card -->
        <section class="glass-card hidden" id="results-card">
             <h2>4. Get Your Files</h2>
            <p class="description">Your icons are ready! Download the .zip file and copy the code into your HTML &lt;head&gt; to enable automatic theme switching.</p>
            <div id="results-content" class="results-content">
                <!-- This will be populated by JavaScript -->
            </div>
            <div id="generate-status" class="status-message hidden"></div>
        </section>
    </main>

    <!-- External Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.3.0/color-thief.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/imagetracerjs@1.2.6/imagetracer_v1.2.6.js"></script>

    <script src="script.js"></script>
</body>
</html>