<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Grandma's Garden Word Game</title>

    <!-- Theme-aware SVG icons -->
    <link rel="icon" href="favicon.ico" sizes="any">
    <link rel="icon" href="favicon-light.svg" type="image/svg+xml" media="(prefers-color-scheme: light)">
    <link rel="icon" href="favicon-dark.svg" type="image/svg+xml" media="(prefers-color-scheme: dark)">

    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">

    <link rel="manifest" href="site.webmanifest">
    <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#111115" media="(prefers-color-scheme: dark)">

    <!-- GLOBAL HEADER STYLES -->
    <link rel="stylesheet" href="/assets/css/style.css">
    
    <!-- GAME SPECIFIC STYLES -->
    <link rel="stylesheet" href="game.css">
</head>
<body>

    <!-- GLOBAL HEADER PLACEHOLDER -->
    <div id="main-nav-placeholder"></div> 
    <script src="/assets/js/nav-loader.js"></script>

    <!-- START SCREEN -->
    <div id="start-screen" class="start-overlay">
        <div class="glass-panel start-card">
            <h1>ğŸŒ¸ Word Garden ğŸŒ¸</h1>
            
            <div id="loading-container">
                <div class="loading-spinner"></div>
                <p id="loading-text" style="color: #4facfe; font-weight: bold; margin-bottom: 5px;">Initializing...</p>
                <div class="progress-container">
                    <div id="progress-bar" class="progress-bar"></div>
                </div>
            </div>

            <div id="start-options" class="size-options" style="display:none; opacity: 0;">
                <p>Select your grid size:</p>
                
                <button class="action-btn success" onclick="startGame(5)">Large (Easy)</button>
                <button class="action-btn info" onclick="startGame(4)">Normal (Medium)</button>
                <button class="action-btn warning" onclick="startGame(3)">Small (Hard)</button>
                
                <p class="instruction-text">
                    â€¢ <b>Tap</b> a letter to add it.<br>
                    â€¢ <b>Tap again</b> to remove it.<br>
                    â€¢ Find words to <b>plant flowers</b> in the garden!
                </p>
            </div>
        </div>
    </div>

    <!-- CUSTOM CONFIRM MODAL -->
    <div id="custom-modal" class="start-overlay" style="display:none; z-index: 1000;">
        <div class="glass-panel start-card" style="max-width: 350px;">
            <h2 style="margin-top:0; color:var(--text-color);">Return to Menu?</h2>
            <p style="color:#ccc; margin-bottom: 20px;">Your current garden will be lost!</p>
            <div class="button-row">
                <button id="modal-yes" class="action-btn warning">Yes, Quit</button>
                <button id="modal-no" class="action-btn info">No, Keep Playing</button>
            </div>
        </div>
    </div>

    <!-- MAIN GAME -->
    <main class="game-container" id="game-container" style="display:none;">
        
        <!-- SIDE PANEL -->
        <aside class="side-panel">
            <section class="garden-area glass-panel">
                <h3>Your Garden</h3>
                <div id="garden-canvas-container">
                    <canvas id="garden-canvas"></canvas>
                </div>
            </section>

            <section class="found-words glass-panel">
                <h3>Words Found</h3>
                <div id="found-words-list" class="words-list">
                    <span class="placeholder-text">...</span>
                </div>
            </section>
        </aside>

        <!-- PLAY AREA -->
        <div class="main-play-area">
            <section class="info-card glass-panel header-card">
                <div class="header-row">
                    <div class="score-box">
                        <span>Score: </span>
                        <span id="current-score" class="score-val">0</span>
                    </div>
                    <button id="reset-btn" class="refresh-btn">ğŸ”„ Menu</button>
                </div>
                
                <!-- CURRENT WORD MOVED HERE -->
                <div class="current-word-display" id="current-word">_ _ _</div>
                
                <div class="message-area" id="message-area">Tap letters to start</div>
            </section>

            <section class="grid-container" id="boggle-grid">
                <!-- Tiles generated by JS -->
            </section>

            <section class="controls-area glass-panel">
                <div class="button-row">
                    <button id="magic-btn" class="action-btn magic">ğŸŒŸ Magic</button>
                    <button id="hint-btn" class="action-btn info">ğŸ’¡ Hint</button>
                    <button id="clear-btn" class="action-btn warning">âŒ Clear</button>
                </div>
                <div class="button-row" style="margin-top: 10px;">
                    <button id="submit-btn" class="action-btn success-big">âœ… CHECK WORD</button>
                </div>
            </section>
        </div>

    </main>

    <!-- THREE.JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/utils/SkeletonUtils.js"></script>

    <script src="script.js"></script>
</body>
</html>